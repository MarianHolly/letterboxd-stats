# ğŸ—ï¸ Test Architecture

Visual guide to the testing infrastructure in Letterboxd Stats.

---

## Testing Pyramid

```
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘   E2E Tests (12)   â•‘  Slow, Comprehensive
         â•‘    (Playwright)    â•‘  Full user flows
         â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
         â•‘  Integration (18)  â•‘  Medium speed
         â•‘   (Backend API)    â•‘  Component interaction
         â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
         â•‘  Unit Tests (26)   â•‘  Fast, Isolated
         â•‘  CSV + Frontend    â•‘  Individual functions
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Recommendation: 70% unit, 20% integration, 10% E2E
Current: 46% unit, 32% integration, 22% E2E
```

---

## Test Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Letterboxd Stats Tests                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Backend Tests          â”‚  â”‚ Frontend Tests      â”‚  â”‚ E2E Test â”‚
â”‚   (pytest)               â”‚  â”‚ (Jest + RTL)        â”‚  â”‚(Playwright)
â”‚                          â”‚  â”‚                     â”‚  â”‚          â”‚
â”‚ â”œâ”€ CSV Parsing (12)      â”‚  â”‚ â”œâ”€ Form (6)        â”‚  â”‚ â”œâ”€ Uploadâ”‚
â”‚ â”‚  â””â”€ Validation         â”‚  â”‚ â”‚  â””â”€ Interaction  â”‚  â”‚ â”‚  Flow  â”‚
â”‚ â”‚  â””â”€ Date handling      â”‚  â”‚ â”œâ”€ Display (6)     â”‚  â”‚ â”œâ”€ Error â”‚
â”‚ â”‚  â””â”€ Type conversion    â”‚  â”‚ â”‚  â””â”€ Rendering    â”‚  â”‚ â”‚  Hndlg â”‚
â”‚ â”‚  â””â”€ Edge cases         â”‚  â”‚ â”œâ”€ Errors (2)      â”‚  â”‚ â”œâ”€ Mobileâ”‚
â”‚ â”‚                        â”‚  â”‚ â”‚  â””â”€ Handling     â”‚  â”‚ â”‚ Design â”‚
â”‚ â”œâ”€ API Endpoints (18)    â”‚  â”‚                     â”‚  â”‚ â””â”€ Multi-â”‚
â”‚ â”‚  â”œâ”€ Health check       â”‚  â”‚ Mocks:              â”‚  â”‚  browser â”‚
â”‚ â”‚  â”œâ”€ Upload             â”‚  â”‚ - fetch             â”‚  â”‚          â”‚
â”‚ â”‚  â”œâ”€ Error responses    â”‚  â”‚ - theme provider    â”‚  â”‚ Services â”‚
â”‚ â”‚  â”œâ”€ TMDB integration   â”‚  â”‚ - next-themes       â”‚  â”‚ - DB     â”‚
â”‚ â”‚  â””â”€ Network errors     â”‚  â”‚                     â”‚  â”‚ - Backendâ”‚
â”‚ â”‚                        â”‚  â”‚                     â”‚  â”‚          â”‚
â”‚ Mocks:                   â”‚  â”‚                     â”‚  â”‚          â”‚
â”‚ - requests.get           â”‚  â”‚                     â”‚  â”‚          â”‚
â”‚ - os.environ             â”‚  â”‚                     â”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                            â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    CI/CD Pipeline
                   (GitHub Actions)
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚                â”‚
      Upload            Report           Notify
      Coverage          Artifacts        PR
```

---

## Data Flow in Tests

### Backend Tests

```
Test Data
   â”‚
   â”œâ”€â†’ CSV Fixture â”€â”€â”€â”€â”€â†’ pd.read_csv() â”€â†’ Assertions
   â”‚
   â”œâ”€â†’ Mock TMDB API â”€â”€â”€â†’ @patch() â”€â”€â”€â”€â†’ API Response â”€â†’ Assertions
   â”‚
   â””â”€â†’ TestClient â”€â”€â”€â”€â”€â”€â†’ POST /upload â”€â†’ Response â”€â†’ Assertions
```

### Frontend Tests

```
Component Setup
   â”‚
   â”œâ”€â†’ render() â”€â”€â”€â”€â†’ DOM â”€â†’ screen.getByText() â”€â†’ Assertions
   â”‚
   â”œâ”€â†’ Mock fetch() â”€â†’ Promise â”€â†’ waitFor() â”€â†’ Assertions
   â”‚
   â””â”€â†’ userEvent() â”€â†’ Events â”€â†’ Change handlers â”€â†’ Assertions
```

### E2E Tests

```
Browser Launch
   â”‚
   â”œâ”€â†’ page.goto() â”€â†’ page.locator() â”€â†’ Interactions â”€â†’ Assertions
   â”‚
   â”œâ”€â†’ File Upload â”€â†’ Form Submit â”€â†’ Network Call â”€â†’ Wait for Result
   â”‚
   â””â”€â†’ Screenshot â”€â”€â†’ Artifact Storage â”€â†’ Review
```

---

## Test Environment Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Development Machine                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Backend Environment                              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Python 3.11                                      â”‚  â”‚
â”‚  â”‚ pytest                                           â”‚  â”‚
â”‚  â”‚ Mock: requests, os.environ                       â”‚  â”‚
â”‚  â”‚ No real DB, No real TMDB API                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Frontend Environment                             â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Node 18                                          â”‚  â”‚
â”‚  â”‚ Jest + Testing Library                           â”‚  â”‚
â”‚  â”‚ Mock: fetch, next-themes, fonts                  â”‚  â”‚
â”‚  â”‚ jsdom (simulated browser)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ E2E Environment                                  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Real Browser (Chromium, Firefox, Safari)         â”‚  â”‚
â”‚  â”‚ Playwright                                       â”‚  â”‚
â”‚  â”‚ Real Backend (localhost:8000)                    â”‚  â”‚
â”‚  â”‚ Real Frontend (localhost:3000)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Test Execution Timeline

```
Local Development:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Developer writes code                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â†’ npm test (Jest)
           â”‚   - Runs in ~5 seconds
           â”‚   - Shows coverage
           â”‚
           â”œâ”€â†’ pytest (Backend)
           â”‚   - Runs in ~10 seconds
           â”‚   - Shows coverage
           â”‚
           â””â”€â†’ npm run test:e2e (Playwright)
               - Runs in ~30 seconds
               - Full flow testing

GitHub Actions CI:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Developer pushes to GitHub                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â†’ Backend Tests (parallel) ~15s
           â”‚
           â”œâ”€â†’ Frontend Tests (parallel) ~20s
           â”‚
           â”œâ”€â†’ E2E Tests ~60s
           â”‚
           â””â”€â†’ Report & Comment ~5s

Total: ~2 minutes for full CI pipeline
```

---

## File Structure

```
letterboxd-stats/
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py âœ… (Tested)
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ pytest.ini â† Config
â”‚   â”‚
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ test_csv_parsing.py (12 tests)
â”‚       â”‚   â”œâ”€â”€ TestCSVParsing
â”‚       â”‚   â”‚   â”œâ”€â”€ test_valid_csv_parsing
â”‚       â”‚   â”‚   â”œâ”€â”€ test_csv_column_validation_*
â”‚       â”‚   â”‚   â”œâ”€â”€ test_csv_date_*
â”‚       â”‚   â”‚   â””â”€â”€ ...
â”‚       â”‚   â””â”€â”€ (12 tests total)
â”‚       â”‚
â”‚       â””â”€â”€ test_api_endpoints.py (18 tests)
â”‚           â”œâ”€â”€ TestHealthCheck
â”‚           â”‚   â””â”€â”€ test_root_endpoint
â”‚           â”œâ”€â”€ TestUploadEndpoint
â”‚           â”‚   â”œâ”€â”€ test_upload_valid_csv
â”‚           â”‚   â”œâ”€â”€ test_upload_csv_missing_*
â”‚           â”‚   â””â”€â”€ ...
â”‚           â”œâ”€â”€ TestUploadWithMockedTMDB
â”‚           â”‚   â”œâ”€â”€ test_upload_with_tmdb_success
â”‚           â”‚   â”œâ”€â”€ test_upload_with_tmdb_*
â”‚           â”‚   â””â”€â”€ ...
â”‚           â””â”€â”€ TestUploadErrorHandling
â”‚               â””â”€â”€ (18 tests total)
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ page.tsx âœ… (Tested)
â”‚   â”‚
â”‚   â”œâ”€â”€ jest.config.ts â† Config
â”‚   â”œâ”€â”€ jest.setup.ts â† Setup
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ playwright.config.ts â† Config
â”‚   â”‚
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ page.test.tsx (14 tests)
â”‚           â”œâ”€â”€ Upload Form Tests
â”‚           â”‚   â”œâ”€â”€ test_renders_upload_form
â”‚           â”‚   â”œâ”€â”€ test_has_disabled_button
â”‚           â”‚   â”œâ”€â”€ test_enables_button_on_file
â”‚           â”‚   â”œâ”€â”€ test_displays_loading_state
â”‚           â”‚   â”œâ”€â”€ test_displays_error
â”‚           â”‚   â””â”€â”€ test_clears_error
â”‚           â”œâ”€â”€ Movie Display Tests
â”‚           â”‚   â”œâ”€â”€ test_displays_movie_data
â”‚           â”‚   â”œâ”€â”€ test_displays_user_rating
â”‚           â”‚   â”œâ”€â”€ test_displays_tmdb_rating
â”‚           â”‚   â”œâ”€â”€ test_displays_poster_image
â”‚           â”‚   â”œâ”€â”€ test_displays_overview
â”‚           â”‚   â””â”€â”€ test_handles_missing_tmdb_data
â”‚           â””â”€â”€ Error Handling Tests
â”‚               â”œâ”€â”€ test_displays_error_backend_down
â”‚               â””â”€â”€ (14 tests total)
â”‚
â”œâ”€â”€ e2e/
â”‚   â””â”€â”€ upload.spec.ts (12 tests)
â”‚       â”œâ”€â”€ E2E - Upload Flow
â”‚       â”‚   â”œâ”€â”€ test_should_load_home_page
â”‚       â”‚   â”œâ”€â”€ test_should_enable_button
â”‚       â”‚   â”œâ”€â”€ test_should_display_loading_state
â”‚       â”‚   â”œâ”€â”€ test_should_display_movie_data
â”‚       â”‚   â”œâ”€â”€ test_should_display_watched_date
â”‚       â”‚   â””â”€â”€ test_should_display_rating
â”‚       â”œâ”€â”€ E2E - Error Handling
â”‚       â”‚   â”œâ”€â”€ test_should_show_error_invalid_csv
â”‚       â”‚   â””â”€â”€ test_should_clear_error
â”‚       â”œâ”€â”€ E2E - Navigation
â”‚       â”‚   â”œâ”€â”€ test_should_show_upload_section
â”‚       â”‚   â””â”€â”€ test_should_display_both_sections
â”‚       â””â”€â”€ E2E - Responsive
â”‚           â”œâ”€â”€ test_should_work_mobile
â”‚           â””â”€â”€ test_should_work_tablet
â”‚
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ tests.yml â† CI/CD Pipeline
            â”œâ”€â”€ Backend Tests Job
            â”œâ”€â”€ Frontend Tests Job
            â”œâ”€â”€ E2E Tests Job
            â””â”€â”€ Summary Job
```

---

## Test Coverage Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Application Flow Coverage Map                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User visits app (E2E âœ…)
    â”‚
    â””â”€â†’ Sees upload form (Frontend Unit âœ…)
        â”‚
        â”œâ”€â†’ Selects file (Frontend Unit âœ…)
        â”‚
        â”œâ”€â†’ Clicks upload (Frontend Unit âœ…)
        â”‚
        â””â”€â†’ POST /upload
            â”‚
            â””â”€â†’ Backend /upload endpoint (Backend Unit âœ…)
                â”‚
                â”œâ”€â†’ Read CSV file (Backend Unit âœ…)
                â”‚
                â”œâ”€â†’ Parse CSV (Backend Unit âœ…)
                â”‚
                â”œâ”€â†’ Validate columns (Backend Unit âœ…)
                â”‚
                â”œâ”€â†’ Extract movie data (Backend Unit âœ…)
                â”‚
                â””â”€â†’ Call TMDB API (Backend Mock âœ…)
                    â”‚
                    â”œâ”€â†’ Success (Backend Unit âœ…)
                    â”œâ”€â†’ Failure (Backend Unit âœ…)
                    â””â”€â†’ Timeout (Backend Unit âœ…)

                Returns response
                â”‚
                â””â”€â†’ Frontend receives data (Frontend Unit âœ…)
                    â”‚
                    â”œâ”€â†’ Updates state (Frontend Unit âœ…)
                    â”‚
                    â””â”€â†’ Renders movie (Frontend Unit âœ…)
                        â”‚
                        â””â”€â†’ User sees results (E2E âœ…)
```

---

## Dependency Isolation

```
Application Dependencies:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  fastapi                           â”‚
â”‚  pandas                            â”‚
â”‚  requests â”€â†’ MOCKED IN TESTS âœ…    â”‚
â”‚  os.environ â”€â†’ MOCKED IN TESTS âœ…  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend Dependencies:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  next                              â”‚
â”‚  react                             â”‚
â”‚  next/font â”€â†’ MOCKED IN TESTS âœ…   â”‚
â”‚  next-themes â”€â†’ MOCKED IN TESTS âœ… â”‚
â”‚  fetch â”€â†’ MOCKED IN TESTS âœ…       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

E2E Tests Use Real:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend server (localhost:3000)   â”‚
â”‚  Backend server (localhost:8000)    â”‚
â”‚  Real browser                       â”‚
â”‚  Real network calls                 â”‚
â”‚  (but with test data)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Test Parallelization

```
Local Development:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ npm test (Frontend) â”€ 5s  â”€â”€â”€â†’ |                â”‚
â”‚ pytest (Backend) â”€â”€â”€â”€â”€ 10s â”€â”€â†’ |                â”‚
â”‚ Sequential by default                           â”‚
â”‚ Total: ~15s                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GitHub Actions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Tests    â”€â”€â”€â”€â”€â”                         â”‚
â”‚                       â”œâ”€â†’ Parallel (same job)  â”‚
â”‚ Frontend Tests   â”€â”€â”€â”€â”€â”¤   ~20s                 â”‚
â”‚                       â”‚                         â”‚
â”‚ E2E Tests â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Sequential (depends on) â”‚
â”‚                       ~60s                      â”‚
â”‚                                                 â”‚
â”‚ Total: ~75s (vs ~90s if sequential)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Test Metrics

```
Code Coverage Target:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend:  80%+  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â”‚
â”‚ Frontend: 70%+  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Test Count Distribution:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Unit Tests:       26 (46%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ â”‚
â”‚ Integration:      18 (32%) â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ â”‚
â”‚ E2E:              12 (22%) â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚ Total:            56 âœ…               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Test Speed:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend:   ~10s  (30 tests)           â”‚
â”‚ Frontend:  ~5s   (14 tests)           â”‚
â”‚ E2E:       ~30s  (12 tests)           â”‚
â”‚ Total:     ~2min (full pipeline)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Continuous Integration Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Developer Push  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    GitHub Workflow Triggered              â”‚
â”‚    (.github/workflows/tests.yml)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚         â”‚          â”‚
    â–¼          â–¼         â–¼          â–¼
  Backend  Frontend   E2E       Setup
  Tests    Tests     Tests      Python
  (pytest) (Jest)  (Playwright) & Node
    â”‚        â”‚        â”‚          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚        â”‚
         â–¼        â–¼
    All Pass?   Report
        â”‚        Coverage
        â”‚        Artifacts
        â–¼
    Success âœ…
    â”‚
    â””â”€â†’ Merge enabled
    â””â”€â†’ PR comment added
    â””â”€â†’ Badges updated
```

---

## Summary

| Aspect | Details |
|--------|---------|
| **Total Tests** | 56 |
| **Test Types** | Unit, Integration, E2E |
| **Test Tools** | pytest, Jest, Playwright |
| **Coverage** | 80%+ backend, 70%+ frontend |
| **CI/CD** | GitHub Actions |
| **Execution Time** | ~2 minutes (full pipeline) |
| **Isolation** | Mocked APIs, no real DB calls |
| **Parallelization** | 3 parallel jobs |
| **Browsers Tested** | Chrome, Firefox, Safari |

âœ… **Production Ready Testing Infrastructure**
